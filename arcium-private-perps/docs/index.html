<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcium Private Perps - Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .demo-section {
            padding: 40px;
        }
        
        .demo-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .demo-card h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: #667eea;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-right: 10px;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .result-box {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .privacy-indicator {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .privacy-indicator strong {
            color: #2196F3;
        }
        
        .info-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .link-section {
            background: #e8f5e9;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .link-section a {
            color: #667eea;
            font-size: 1.2em;
            text-decoration: none;
            font-weight: bold;
        }
        
        .link-section a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí Arcium Private Perps</h1>
            <p>Interactive Demo - Private Perpetuals Trading Platform</p>
            <p style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                Built with Arcium Privacy-Preserving Computation on Solana
            </p>
        </header>
        
        <div class="demo-section">
            <div class="demo-card">
                <h2>üìä Open Private Position</h2>
                <p style="margin-bottom: 20px; color: #666;">
                    Simulate opening a private position. Your position details will be encrypted and remain private.
                </p>
                
                <div class="form-group">
                    <label>Position Size (SOL)</label>
                    <input type="number" id="positionSize" value="100" min="1" step="0.1">
                </div>
                
                <div class="form-group">
                    <label>Direction</label>
                    <select id="direction">
                        <option value="long">Long</option>
                        <option value="short">Short</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Leverage</label>
                    <input type="number" id="leverage" value="10" min="1" max="100">
                </div>
                
                <div class="form-group">
                    <label>Entry Price (USD)</label>
                    <input type="number" id="entryPrice" value="150" min="1" step="0.01">
                </div>
                
                <button class="btn" onclick="openPosition()">üîí Open Private Position</button>
                <button class="btn btn-secondary" onclick="clearResults()">Clear</button>
                
                <div class="privacy-indicator" id="privacyInfo" style="display: none;">
                    <strong>üîê Privacy Protected:</strong>
                    <p id="privacyText"></p>
                </div>
                
                <div class="result-box" id="result" style="display: none;"></div>
            </div>
            
            <div class="demo-card">
                <h2>üìà Check Position Status</h2>
                <p style="margin-bottom: 20px; color: #666;">
                    View your position's PnL while keeping position details private.
                </p>
                
                <button class="btn" onclick="checkPnL()">üìä Check PnL</button>
                <button class="btn btn-secondary" onclick="checkLiquidation()">‚ö†Ô∏è Check Liquidation Risk</button>
                
                <div class="result-box" id="pnlResult" style="display: none;"></div>
            </div>
            
            <div class="info-box">
                <strong>‚ÑπÔ∏è How Arcium Provides Privacy:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Private Positions:</strong> Size and direction encrypted, only you know details</li>
                    <li><strong>Private Orders:</strong> Order intent hidden until execution</li>
                    <li><strong>Private Liquidation Checks:</strong> Health computed privately</li>
                    <li><strong>Public PnL:</strong> Only final profit/loss revealed for transparency</li>
                </ul>
            </div>
            
            <div class="link-section">
                <h3 style="color: #667eea; margin-bottom: 15px;">üîó Repository & Documentation</h3>
                <p style="margin-bottom: 10px;">
                    <a href="https://github.com/Frankznation/arcium-private-perps" target="_blank">
                        üì¶ View on GitHub
                    </a>
                </p>
                <p style="font-size: 0.9em; color: #666; margin-top: 15px;">
                    Full source code, documentation, and implementation details available in the repository.
                </p>
            </div>
        </div>
    </div>
    
    <script>
        let currentPosition = null;
        
        function generateHash(data) {
            // Simple hash simulation
            let hash = 0;
            const str = JSON.stringify(data);
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash).toString(16).padStart(32, '0');
        }
        
        function encryptData(data) {
            // Simulate encryption - in real app, this would use Arcium SDK
            const encrypted = btoa(JSON.stringify(data));
            return {
                encrypted: encrypted,
                hash: generateHash(data)
            };
        }
        
        function openPosition() {
            const size = parseFloat(document.getElementById('positionSize').value);
            const direction = document.getElementById('direction').value;
            const leverage = parseInt(document.getElementById('leverage').value);
            const entryPrice = parseFloat(document.getElementById('entryPrice').value);
            
            if (!size || size <= 0) {
                alert('Please enter a valid position size');
                return;
            }
            
            const positionData = {
                size: size,
                direction: direction,
                leverage: leverage,
                entryPrice: entryPrice,
                timestamp: new Date().toISOString()
            };
            
            // Encrypt position data
            const encrypted = encryptData(positionData);
            currentPosition = {
                ...positionData,
                encryptedData: encrypted.encrypted,
                positionHash: encrypted.hash,
                openedAt: new Date()
            };
            
            // Show privacy indicator
            document.getElementById('privacyInfo').style.display = 'block';
            document.getElementById('privacyText').innerHTML = `
                Your position details have been encrypted using Arcium's privacy-preserving computation.
                <br><strong>Position Hash:</strong> ${encrypted.hash.substring(0, 16)}...
                <br>Only you can see your exact position size (${size} SOL) and direction (${direction}).
            `;
            
            // Show result
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
<strong style="color: #4ec9b0;">‚úÖ Private Position Opened Successfully!</strong>

<strong>Encrypted Position Data:</strong>
{
  "encrypted": "${encrypted.encrypted.substring(0, 50)}...",
  "hash": "${encrypted.hash}",
  "status": "active"
}

<strong>What's Private:</strong>
- Position Size: ${size} SOL (encrypted)
- Direction: ${direction} (encrypted)
- Leverage: ${leverage}x (encrypted)
- Entry Price: $${entryPrice} (encrypted)

<strong>What's Public:</strong>
- Position Hash: ${encrypted.hash.substring(0, 16)}... (for verification)
- Status: Active
- Opened At: ${new Date().toLocaleString()}

<strong style="color: #4caf50;">üîê Your position details remain private!</strong>
            `;
        }
        
        function checkPnL() {
            if (!currentPosition) {
                alert('Please open a position first');
                return;
            }
            
            // Simulate current market price
            const currentPrice = parseFloat(document.getElementById('entryPrice').value) * (0.95 + Math.random() * 0.1);
            const priceChange = currentPrice - currentPosition.entryPrice;
            const priceChangePercent = (priceChange / currentPosition.entryPrice) * 100;
            
            let pnl;
            if (currentPosition.direction === 'long') {
                pnl = priceChange * currentPosition.size * currentPosition.leverage;
            } else {
                pnl = -priceChange * currentPosition.size * currentPosition.leverage;
            }
            
            const pnlPercent = (pnl / (currentPosition.size * currentPosition.entryPrice)) * 100;
            
            const resultDiv = document.getElementById('pnlResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
<strong style="color: #4ec9b0;">üìä Position PnL (Public)</strong>

<strong>Current Market Price:</strong> $${currentPrice.toFixed(2)}
<strong>Entry Price:</strong> $${currentPosition.entryPrice.toFixed(2)}
<strong>Price Change:</strong> ${priceChangePercent > 0 ? '+' : ''}${priceChangePercent.toFixed(2)}%

<strong>PnL:</strong> <span style="color: ${pnl >= 0 ? '#4caf50' : '#f44336'};">
  ${pnl >= 0 ? '+' : ''}$${pnl.toFixed(2)} (${pnlPercent >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%)
</span>

<strong style="color: #2196F3;">üîê Private Information (Not Revealed):</strong>
- Position Size: Hidden
- Direction: Hidden
- Leverage: Hidden
- Exact Entry Price: Hidden

<strong style="color: #4caf50;">‚úÖ Only final PnL is revealed for transparency!</strong>
            `;
        }
        
        function checkLiquidation() {
            if (!currentPosition) {
                alert('Please open a position first');
                return;
            }
            
            // Simulate private liquidation check
            const healthRatio = 120 + Math.random() * 80; // 120-200%
            const isLiquidatable = healthRatio < 150;
            
            const resultDiv = document.getElementById('pnlResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
<strong style="color: #4ec9b0;">‚ö†Ô∏è Liquidation Risk Check (Private)</strong>

<strong>Health Check Result:</strong>
- Health Ratio: ${healthRatio.toFixed(1)}%
- Status: <span style="color: ${isLiquidatable ? '#f44336' : '#4caf50'};">
  ${isLiquidatable ? '‚ö†Ô∏è At Risk' : '‚úÖ Healthy'}
</span>

<strong style="color: #2196F3;">üîê Privacy Protected:</strong>
This health check was computed privately using Arcium.
Liquidators cannot see:
- Your position size
- Your exact health ratio
- Whether you're at risk

<strong style="color: #4caf50;">‚úÖ Only the result (liquidatable: ${isLiquidatable ? 'yes' : 'no'}) is revealed!</strong>
            `;
        }
        
        function clearResults() {
            document.getElementById('result').style.display = 'none';
            document.getElementById('pnlResult').style.display = 'none';
            document.getElementById('privacyInfo').style.display = 'none';
            currentPosition = null;
        }
    </script>
</body>
</html>
